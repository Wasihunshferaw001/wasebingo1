<!DOCTYPE html>
<html>
<head>
    <title>Bingo Card Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        h1 {
            color: #2e8b57;
            margin-bottom: 20px;
        }
        .controls {
            margin: 20px 0;
        }
        button {
            background-color: #2e8b57;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #3cb371;
        }
        .game-area {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        .bingo-card {
            display: none;
            border: 3px solid #2e8b57;
            border-radius: 10px;
            padding: 10px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .bingo-card.visible {
            display: inline-block;
        }
        table {
            border-collapse: collapse;
            margin: 0 auto;
        }
        td {
            width: 50px;
            height: 50px;
            border: 2px solid #2e8b57;
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            background-color: #ffffff;
            transition: background-color 0.3s;
        }
        td:hover {
            background-color: #e6ffe6;
        }
        td.marked {
            background-color: #98fb98;
            color: #006400;
        }
        .bingo-header {
            background-color: #2e8b57;
            color: white;
            font-weight: bold;
        }
        .called-numbers {
            background-color: #e6ffe6;
            border: 2px solid #2e8b57;
            border-radius: 10px;
            padding: 15px;
            margin: 20px auto;
            max-width: 600px;
            min-height: 60px;
        }
        .called-number {
            display: inline-block;
            width: 40px;
            height: 40px;
            background-color: #2e8b57;
            color: white;
            border-radius: 50%;
            line-height: 40px;
            margin: 5px;
            font-weight: bold;
        }
        .current-number {
            font-size: 24px;
            font-weight: bold;
            color: #2e8b57;
            margin: 10px 0;
        }
        .win-message {
            font-size: 24px;
            font-weight: bold;
            color: #2e8b57;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Bingo Card Game</h1>
    
    <div class="controls">
        <button id="newGameBtn">New Game</button>
        <button id="callNumberBtn">Call Number</button>
        <button id="addCardBtn">Add Card</button>
    </div>
    
    <div class="current-number" id="currentNumber">Current Number: -</div>
    
    <div class="called-numbers" id="calledNumbers">
        <div>Called Numbers:</div>
    </div>
    
    <div class="game-area" id="gameArea">
        <!-- Bingo cards will be added here -->
    </div>
    
    <div class="win-message" id="winMessage"></div>

    <script>
        // Game variables
        let calledNumbers = [];
        let availableNumbers = [];
        let currentNumber = null;
        let gameActive = false;
        let cardCount = 0;
        const maxCards = 4;
        
        // DOM elements
        const newGameBtn = document.getElementById('newGameBtn');
        const callNumberBtn = document.getElementById('callNumberBtn');
        const addCardBtn = document.getElementById('addCardBtn');
        const currentNumberDisplay = document.getElementById('currentNumber');
        const calledNumbersDisplay = document.getElementById('calledNumbers');
        const gameArea = document.getElementById('gameArea');
        const winMessage = document.getElementById('winMessage');
        
        // Initialize a new game
        function newGame() {
            // Reset game state
            calledNumbers = [];
            availableNumbers = Array.from({length: 75}, (_, i) => i + 1);
            currentNumber = null;
            gameActive = true;
            cardCount = 0;
            
            // Clear displays
            gameArea.innerHTML = '';
            calledNumbersDisplay.innerHTML = '<div>Called Numbers:</div>';
            currentNumberDisplay.textContent = 'Current Number: -';
            winMessage.textContent = '';
            
            // Enable buttons
            callNumberBtn.disabled = false;
            addCardBtn.disabled = false;
            
            // Add first card
            addCard();
        }
        
        // Add a new bingo card
        function addCard() {
            if (cardCount >= maxCards) {
                alert(`Maximum of ${maxCards} cards reached!`);
                return;
            }
            
            const cardId = cardCount;
            cardCount++;
            
            const card = document.createElement('div');
            card.className = 'bingo-card visible';
            card.id = `card-${cardId}`;
            card.innerHTML = `
                <table>
                    <tr>
                        <td class="bingo-header">B</td>
                        <td class="bingo-header">I</td>
                        <td class="bingo-header">N</td>
                        <td class="bingo-header">G</td>
                        <td class="bingo-header">O</td>
                    </tr>
                    ${generateCardRows()}
                </table>
            `;
            
            gameArea.appendChild(card);
            
            // Mark FREE space
            const freeSpace = card.querySelector('table tr:nth-child(4) td:nth-child(3)');
            freeSpace.classList.add('marked');
            
            // Add click handlers
            const cells = card.querySelectorAll('td');
            cells.forEach(cell => {
                if (!cell.classList.contains('bingo-header') && cell.textContent !== 'FREE') {
                    cell.addEventListener('click', function() {
                        if (gameActive && currentNumber && this.textContent == currentNumber) {
                            this.classList.add('marked');
                            checkBingo(cardId);
                        }
                    });
                }
            });
        }
        
        // Generate card rows with random numbers
        function generateCardRows() {
            const columns = {
                'B': [1, 15],
                'I': [16, 30],
                'N': [31, 45],
                'G': [46, 60],
                'O': [61, 75]
            };
            
            let rowsHTML = '';
            
            for (let r = 0; r < 5; r++) {
                rowsHTML += '<tr>';
                for (let c = 0; c < 5; c++) {
                    if (r === 2 && c === 2) {
                        rowsHTML += '<td>FREE</td>';
                        continue;
                    }
                    
                    const columnLetter = ['B', 'I', 'N', 'G', 'O'][c];
                    const [min, max] = columns[columnLetter];
                    let randomNum = Math.floor(Math.random() * (max - min + 1)) + min;
                    
                    rowsHTML += `<td>${randomNum}</td>`;
                }
                rowsHTML += '</tr>';
            }
            
            return rowsHTML;
        }
        
        // Call the next number
        function callNextNumber() {
            if (!gameActive || availableNumbers.length === 0) {
                gameActive = false;
                return;
            }
            
            const randomIndex = Math.floor(Math.random() * availableNumbers.length);
            currentNumber = availableNumbers[randomIndex];
            availableNumbers.splice(randomIndex, 1);
            calledNumbers.push(currentNumber);
            
            currentNumberDisplay.textContent = `Current Number: ${currentNumber}`;
            
            // Add to called numbers display
            const numberDiv = document.createElement('div');
            numberDiv.className = 'called-number';
            numberDiv.textContent = currentNumber;
            calledNumbersDisplay.appendChild(numberDiv);
            
            // Auto-scroll called numbers
            calledNumbersDisplay.scrollLeft = calledNumbersDisplay.scrollWidth;
        }
        
        // Check for bingo on a specific card
        function checkBingo(cardId) {
            if (!gameActive) return;
            
            const card = document.getElementById(`card-${cardId}`);
            const table = card.querySelector('table');
            const rows = table.rows;
            let bingo = false;
            
            // Check rows (skip header)
            for (let r = 1; r < rows.length; r++) {
                let rowMarked = true;
                for (let c = 0; c < rows[r].cells.length; c++) {
                    if (r === 3 && c === 2) continue; // Skip FREE space
                    if (!rows[r].cells[c].classList.contains('marked')) {
                        rowMarked = false;
                        break;
                    }
                }
                if (rowMarked) bingo = true;
            }
            
            // Check columns
            if (!bingo) {
                for (let c = 0; c < 5; c++) {
                    let colMarked = true;
                    for (let r = 1; r < rows.length; r++) {
                        if (r === 3 && c === 2) continue; // Skip FREE space
                        if (!rows[r].cells[c].classList.contains('marked')) {
                            colMarked = false;
                            break;
                        }
                    }
                    if (colMarked) bingo = true;
                }
            }
            
            // Check diagonals
            if (!bingo) {
                // Top-left to bottom-right
                let diag1Marked = true;
                for (let i = 0; i < 5; i++) {
                    if (i === 2 && i === 2) continue; // Skip FREE space
                    if (!rows[i+1].cells[i].classList.contains('marked')) {
                        diag1Marked = false;
                        break;
                    }
                }
                
                // Top-right to bottom-left
                let diag2Marked = true;
                for (let i = 0; i < 5; i++) {
                    if (i === 2 && (4-i) === 2) continue; // Skip FREE space
                    if (!rows[i+1].cells[4-i].classList.contains('marked')) {
                        diag2Marked = false;
                        break;
                    }
                }
                
                bingo = diag1Marked || diag2Marked;
            }
            
            if (bingo) {
                gameActive = false;
                winMessage.textContent = `BINGO! Card ${cardId+1} wins!`;
                card.style.boxShadow = '0 0 20px #ff0000';
                card.style.transform = 'scale(1.05)';
                card.style.transition = 'all 0.5s';
            }
        }
        
        // Event listeners
        newGameBtn.addEventListener('click', newGame);
        callNumberBtn.addEventListener('click', callNextNumber);
        addCardBtn.addEventListener('click', addCard);
        
        // Initialize game
        newGame();
    </script>
</body>
</html>